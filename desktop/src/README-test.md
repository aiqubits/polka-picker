# Tauri API 测试脚本说明

此测试脚本用于测试 OpenPick 桌面应用程序中的所有 Tauri 后端 API 接口。它提供了一个简单的用户界面，可以一键运行所有 API 测试并查看结果。

## 文件位置

测试脚本位于 `/opt/rust/project/picker/desktop/src/App-test.tsx`

## 功能概述

测试脚本涵盖了以下所有 Tauri 后端 API 接口：

### 用户相关 API
- **login**: 用户登录认证
- **register**: 用户注册新账号
- **verify_email**: 验证用户邮箱
- **get_user_profile**: 获取当前登录用户的详细资料
- **logout**: 用户登出系统
- **check_login_status**: 检查用户是否已登录
- **get_current_user_info**: 获取本地存储的当前用户信息

### Picker 相关 API
- **get_picker_marketplace**: 获取市场上可用的 Picker 列表
- **get_picker_detail**: 获取指定 Picker 的详细信息
- **upload_picker**: 上传新的 Picker 到市场

### 订单相关 API
- **get_user_orders**: 获取当前登录用户的订单列表
- **create_order**: 创建新的订单
- **get_order_detail**: 获取指定订单的详细信息

### 下载相关 API
- **download_picker**: 下载指定的 Picker 文件

## 使用方法

1. 确保您的 Tauri 应用程序正在运行
2. 访问测试页面（通过修改路由或直接运行测试组件）
3. 点击"运行所有测试"按钮开始测试
4. 查看测试结果，绿色表示成功，红色表示失败

## 注意事项

1. **测试数据**: 脚本中使用了一些假设的测试数据（如测试邮箱和密码）。在实际测试中，您可能需要修改这些数据以匹配您的测试环境。

2. **登录状态**: 某些 API 需要用户登录才能访问。脚本会尝试先登录，如果登录成功，才会测试这些需要认证的 API。

3. **下载功能**: 下载测试需要一个有效的下载令牌。由于这个令牌通常是短期的，下载测试可能会失败，这是正常现象。

4. **错误处理**: 脚本包含了全面的错误处理，可以捕获并显示 API 调用过程中的任何错误。

## 测试结果说明

每个测试结果包含以下信息：
- **测试名称**: API 接口的名称
- **状态**: 成功或失败
- **消息**: 成功消息或错误信息
- **数据**: 如果测试成功，会显示 API 返回的数据（格式化的 JSON）

## 修改和扩展

如果您需要添加新的 API 测试或修改现有测试，可以编辑 `App-test.tsx` 文件：

1. 添加新的测试函数，使用 `invoke` 调用新的 API
2. 在 `runAllTests` 函数中添加对新测试函数的调用
3. 如果需要，可以为新的 API 响应定义新的 TypeScript 接口

## 开发提示

1. 在开发新的 API 时，可以使用此测试脚本快速验证 API 的功能
2. 如果 API 行为发生变化，可以更新测试脚本来反映这些变化
3. 测试脚本使用了 TypeScript，可以提供良好的类型安全性和开发体验